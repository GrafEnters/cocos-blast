# Cocos Blast

Прототип игры в жанре головоломка с механикой Blast, реализованный на TypeScript и Cocos Creator 2.4.x.

## Описание игры

Игрок кликает на тайлы одного цвета, чтобы уничтожить всю группу прилегающих тайлов. После уничтожения тайлы падают вниз под действием гравитации, а пустые ячейки заполняются новыми тайлами. Цель игры - набрать определенное количество очков за ограниченное число ходов.

## Архитектура проекта

Проект построен на принципах ООП и SOLID с четким разделением логики игры и представления.

### Основные компоненты

#### 1. GameCore (Ядро игры)
- **Models/BlastGameModel** - основная модель игры, содержащая игровую логику:
  - Управление игровым полем
  - Группировка и удаление тайлов
  - Подсчет очков
  - Применение гравитации и заполнение поля
  - Обработка супер-тайлов и бустеров
- **GameController** - контроллер, координирующий взаимодействие между моделью, представлением и анимациями
- **FieldView** - представление игрового поля
- **Animations/BlastAnimationView** - система анимаций для визуализации игровых событий

#### 2. Supertiles (Супер-тайлы)
Расширяемая система супер-тайлов с поддержкой цепочек активаций:
- **RocketHSupertileExtension** - уничтожает всю горизонтальную строку
- **RocketVSupertileExtension** - уничтожает всю вертикальную колонку
- **DynamiteSupertileExtension** - уничтожает тайлы в радиусе
- **DynamiteMaxSupertileExtension** - уничтожает все тайлы на поле

#### 3. Boosters (Бустеры)
Система бустеров для дополнительных возможностей:
- **BombBoosterExtension** - уничтожает тайлы в радиусе при клике
- **TeleportBoosterExtension** - позволяет менять местами два тайла

#### 4. Input (Ввод)
- **TapInput** - обработка кликов по тайлам
- **TileInputEvent** - события ввода

#### 5. UI (Пользовательский интерфейс)
- **GameUI** - главный компонент UI
- **TopPanelView** - отображение очков и ходов
- **EndGamePanel** - панель окончания игры
- **BoostersPanelView** - панель бустеров

#### 6. Config (Конфигурация)
Система конфигурации уровней и игровых элементов:
- **LevelConfig** - конфигурация уровней
- **SupertilesConfigList** - конфигурация супер-тайлов
- **BoostersConfigList** - конфигурация бустеров

#### 7. DI (Dependency Injection)
- **DiContainer** - контейнер зависимостей
- **DiInitializer** - инициализация зависимостей

#### 8. Utils (Утилиты)
- **ValidationUtils** - функции валидации игровых данных

## Структура проекта

```
assets/
├── Script/
│   ├── GameCore/              # Ядро игры
│   │   ├── Models/            # Модели данных
│   │   ├── Supertiles/        # Супер-тайлы
│   │   ├── Boosters/          # Бустеры
│   │   ├── Animations/        # Анимации
│   │   └── Utils/             # Утилиты
│   ├── Input/                 # Обработка ввода
│   ├── UI/                    # Пользовательский интерфейс
│   ├── Config/                 # Конфигурация
│   └── DI/                    # Dependency Injection
├── resources/                 # Ресурсы игры
│   ├── Configs/              # Конфигурационные файлы
│   ├── Supertiles/           # Конфигурации супер-тайлов
│   └── Boosters/             # Конфигурации бустеров
└── Scene/                     # Сцены игры

tests/                          # Unit-тесты
├── BlastGameModel.test.ts     # Тесты игровой модели
└── ValidationUtils.test.ts    # Тесты утилит валидации
```

## Тестирование

Проект включает unit-тесты для критической логики игры:
- Группировка тайлов
- Подсчет очков
- Применение гравитации
- Валидация данных

Тесты находятся в директории `tests/`.

### Запуск тестов

1. Установите зависимости:
```bash
npm install
```

2. Запустите тесты:
```bash
npm test
```

Тесты будут выполнены и выведена статистика с результатами.

## Технологии

- **TypeScript** - язык программирования
- **Cocos Creator 2.4.x** - игровой движок
- **Dependency Injection** - паттерн управления зависимостями

## Принципы проектирования

- **Разделение ответственности** - логика игры отделена от представления
- **Расширяемость** - система супер-тайлов и бустеров построена на паттерне Strategy
- **Тестируемость** - критическая логика покрыта unit-тестами
- **Типобезопасность** - строгая типизация TypeScript
