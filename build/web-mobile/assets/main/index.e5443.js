window.__require=function e(t,o,n){function r(s,l){if(!o[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var u="function"==typeof __require&&__require;if(!l&&u)return u(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var c=o[s]={exports:{}};t[s][0].call(c.exports,function(e){return r(t[s][1][e]||e)},c,c.exports,e,t,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({ActiveBoosterOverlay:[function(e,t,o){"use strict";cc._RF.push(t,"b3665XihvNEl7i/Me2Po236","ActiveBoosterOverlay");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,a=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.BoosterLabel=null,t}return r(t,e),i([a(cc.Label)],t.prototype,"BoosterLabel",void 0),i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],AdminPanel:[function(e,t,o){"use strict";cc._RF.push(t,"948b3KNcGFLo5/NnZw7pngQ","AdminPanel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,a=s.property,u=e("../DI/DiContainer"),c=e("../DI/DiTokens"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttonsGroup=null,t.levelButtonPrefab=null,t.boosterButtonsGroup=null,t.boosterButtonPrefab=null,t}return r(t,e),t.prototype.onToggleClick=function(){var e=!this.node.active;this.node.active=!this.node.active,e&&(this.buildLevelButtons(),this.buildBoosterButtons())},t.prototype.onButtonClick=function(e,t){"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c 5 \u0445\u043e\u0434\u043e\u0432"!==t||this.onAddMoves()},t.prototype.onStartLevel=function(e,t){var o=parseInt(t,10);isNaN(o)||this.startLevel(o)},t.prototype.onAddBooster=function(e,t){t&&this.addBooster(t)},t.prototype.onAddMoves=function(){if(u.default.instance.has(c.default.GameController)){var e=u.default.instance.resolve(c.default.GameController);e&&e.addMoves(5)}},t.prototype.buildLevelButtons=function(){if(this.buttonsGroup&&this.levelButtonPrefab&&u.default.instance.has(c.default.LevelsConfigList)){var e=u.default.instance.resolve(c.default.LevelsConfigList);if(e){var t=e.getConfigs();if(t&&0!==t.length){this.buttonsGroup.removeAllChildren();for(var o=0;o<t.length;o++){var n=o+1,r=cc.instantiate(this.levelButtonPrefab),i=r.getComponentInChildren(cc.Label);if(i){var s=t[o];i.string=s&&s.name?s.name:"Level "+n}r.name="SelectLevel"+n+"Button";var l=r.getComponent(cc.Button);if(l){var a=new cc.Component.EventHandler;a.target=this.node,a.component="AdminPanel",a.handler="onStartLevel",a.customEventData=String(n),l.clickEvents.push(a)}this.buttonsGroup.addChild(r)}}}}},t.prototype.startLevel=function(e){if(u.default.instance.has(c.default.LevelsConfigList)){var t=u.default.instance.resolve(c.default.LevelsConfigList);if(t){var o=t.getConfigs();if(o&&0!==o.length){var n=e-1;if(!(n<0||n>=o.length)&&u.default.instance.has(c.default.PlayerProfile)&&(u.default.instance.resolve(c.default.PlayerProfile).setCurrentLevelIndex(n),u.default.instance.has(c.default.DiInitializer))){var r=u.default.instance.resolve(c.default.DiInitializer);r&&(r.rebuild=!0)}}}}},t.prototype.buildBoosterButtons=function(){if(this.boosterButtonsGroup&&this.boosterButtonPrefab&&u.default.instance.has(c.default.BoostersConfig)){var e=u.default.instance.resolve(c.default.BoostersConfig);if(e){var t=e.getConfigs();if(t&&0!==t.length){this.boosterButtonsGroup.removeAllChildren();for(var o=0;o<t.length;o++){var n=t[o];if(n&&n.id){var r=cc.instantiate(this.boosterButtonPrefab),i=r.getComponentInChildren(cc.Label);i&&(i.string="Add 5 "+n.id),r.name="AddBooster"+n.id+"Button";var s=r.getComponent(cc.Button);if(s){var l=new cc.Component.EventHandler;l.target=this.node,l.component="AdminPanel",l.handler="onAddBooster",l.customEventData=n.id,s.clickEvents.push(l)}this.boosterButtonsGroup.addChild(r)}}}}}},t.prototype.addBooster=function(e){if(e&&u.default.instance.has(c.default.PlayerProfile)){var t=u.default.instance.resolve(c.default.PlayerProfile);if(t&&(t.changeBoosterCount(e,5),u.default.instance.has(c.default.GameUI))){var o=u.default.instance.resolve(c.default.GameUI);o&&o.boostersPanel&&o.boostersPanel.refreshAllButtons()}}},i([a(cc.Node)],t.prototype,"buttonsGroup",void 0),i([a(cc.Prefab)],t.prototype,"levelButtonPrefab",void 0),i([a(cc.Node)],t.prototype,"boosterButtonsGroup",void 0),i([a(cc.Prefab)],t.prototype,"boosterButtonPrefab",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../DI/DiContainer":"DiContainer","../DI/DiTokens":"DiTokens"}],BlastAnimationView:[function(e,t,o){"use strict";cc._RF.push(t,"cb28eWwoxpGjJpAT1BGbzwV","BlastAnimationView");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function l(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(l){i=[6,l],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.playGroupRemoveAnimation=function(e){return n(this,void 0,Promise,function(){var t,o,n;return r(this,function(r){switch(r.label){case 0:if(!e||0===e.length)return[2];for(t=[],o=function(o){var n=e[o];if(!n||!n.node||!n.node.isValid)return"continue";var r=new Promise(function(e){n.node.scale=1,cc.tween(n.node).to(.08,{scale:1.15}).to(.08,{scale:0}).call(function(){return e()}).start()});t.push(r)},n=0;n<e.length;n++)o(n);return[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.prototype.playBombBurnAnimation=function(e,t){return n(this,void 0,Promise,function(){var o,n,i,s;return r(this,function(){return e&&e.isValid?(o=e.x,n=e.y,i=1,s=setInterval(function(){e.isValid?(e.x=o+3*i,i=-i):clearInterval(s)},80),[2,new Promise(function(r){setTimeout(function(){clearInterval(s),e.isValid&&e.setPosition(o,n),r()},1e3*t)})]):[2]})})},e.prototype.playEventAnimations=function(e,t){return n(this,void 0,Promise,function(){var o,n,i;return r(this,function(r){switch(r.label){case 0:return e.preAnimation?[4,e.preAnimation(t,this)]:[3,2];case 1:r.sent(),r.label=2;case 2:return 0===(o=this.collectTilesToPop(e.stepResult.removed,t)).length?[2]:(n=e.animationSteps||[]).length>0&&(i=this.groupAnimationStepsByDepth(n,t)).length>0?[4,this.playGroupedAnimations(i)]:[3,4];case 3:return r.sent(),[2];case 4:return[4,this.playGroupRemoveAnimation(o)];case 5:return r.sent(),[2]}})})},e.prototype.collectTilesToPop=function(e,t){for(var o=[],n=0;n<e.length;n++){var r=e[n],i=t.getTile(r.row,r.col);i&&o.push(i)}return o},e.prototype.groupAnimationStepsByDepth=function(e,t){for(var o=[],n={},r=this.extractUniqueDepths(e),i=0;i<r.length;i++){var s=r[i],l=this.collectTilesForDepth(e,s,t,n);l.length>0&&o.push(l)}return o},e.prototype.extractUniqueDepths=function(e){for(var t={},o=[],n=0;n<e.length;n++){var r=e[n],i=r.depth.toString();t[i]||(t[i]=!0,o.push(r.depth))}return o.sort(function(e,t){return e-t}),o},e.prototype.collectTilesForDepth=function(e,t,o,n){for(var r=[],i=0;i<e.length;i++){var s=e[i];if(s.depth===t)for(var l=s.cells,a=0;a<l.length;a++){var u=l[a],c=u.row+"_"+u.col;if(!n[c]){var p=o.getTile(u.row,u.col);p&&(n[c]=!0,r.push(p))}}}return r},e.prototype.playGroupedAnimations=function(e){return n(this,void 0,Promise,function(){var t;return r(this,function(o){switch(o.label){case 0:t=0,o.label=1;case 1:return t<e.length?[4,this.playGroupRemoveAnimation(e[t])]:[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e}();o.default=i,cc._RF.pop()},{}],BlastGameModel:[function(e,t,o){"use strict";cc._RF.push(t,"4737cl+r6JKvrDoYdcU1gdq","BlastGameModel");var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),e("./IGameModel");var r=e("../../Input/TileInputEventType"),i=function(){function e(e,t,o,n,r){this.board=[],this.getSuperTileTypeForSize=null,this.superTileExtensionFactory=null,this.boosterExtensionFactory=null,this.rows=e,this.cols=t,this.colors=o&&o.length>0?o.slice():["red","green","blue","yellow"],this.totalMoves=n>=0?n:0,this.remainingMoves=this.totalMoves,this.score=0,this.targetScore=r>0?r:0}return e.prototype.getSupportedEvents=function(){return[r.default.Tap,r.default.Booster]},e.prototype.handleEvent=function(e){return this.canHandleEvent()?e.type===r.default.Tap?this.handleTapEvent(e):e.type===r.default.Booster?this.handleBoosterEvent(e):null:null},e.prototype.canHandleEvent=function(){return!(this.remainingMoves<=0||this.targetScore>0&&this.score>=this.targetScore)},e.prototype.handleTapEvent=function(e){var t=e.tile;if(!t)return null;var o={superTileChainSteps:[]},n=this.handleTap(t.row,t.col,o);return n?{stepResult:n,animationSteps:o.superTileChainSteps||[]}:null},e.prototype.handleBoosterEvent=function(e){if(!e.boosterId)return null;var t=e.boosterData;if(!t)return null;var o={superTileChainSteps:[]},r=n(n({},t),{chainData:o}),i=this.handleBooster(e.boosterId,r);if(!i)return null;var s=this.extractPreAnimation(t);return{stepResult:i,animationSteps:o.superTileChainSteps||[],preAnimation:s}},e.prototype.extractPreAnimation=function(e){if("object"==typeof e&&null!==e)return"preAnimation"in e&&"function"==typeof e.preAnimation?e.preAnimation:void 0},e.prototype.setSuperTileGenerationCallback=function(e){this.getSuperTileTypeForSize=e},e.prototype.setSuperTileExtensionFactory=function(e){this.superTileExtensionFactory=e},e.prototype.setBoosterExtensionFactory=function(e){this.boosterExtensionFactory=e},e.prototype.init=function(e){this.board=[];for(var t=0;t<this.rows;t++){this.board[t]=[];for(var o=0;o<this.cols;o++){var n=null;if(e&&t<e.length&&e[t]&&o<e[t].length){var r=e[t][o];"string"==typeof r&&r.trim().length>0&&(n=r.trim())}this.board[t][o]=null!==n?n:this.randomColorKey()}}},e.prototype.getBoard=function(){return this.board},e.prototype.getRemainingMoves=function(){return this.remainingMoves},e.prototype.getScore=function(){return this.score},e.prototype.getTargetScore=function(){return this.targetScore},e.prototype.hasAvailableMoves=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.cols;t++){var o=this.board[e][t];if(null!==o&&!this.isSuperTile(e,t)&&this.isColor(o)&&this.hasSameColorNeighbor(e,t,o))return!0}return!1},e.prototype.addMoves=function(e){e<=0||(this.remainingMoves+=e)},e.prototype.handleTap=function(e,t,o){if(!this.validateTapInput(e,t))return null;var n=this.board[e][t];return null===n?null:this.isSuperTile(e,t)?this.handleSuperTileTap(e,t,o):this.handleColorTileTap(e,t,n)},e.prototype.validateTapInput=function(e,t){return!(this.remainingMoves<=0||this.targetScore>0&&this.score>=this.targetScore||!this.isInside(e,t))},e.prototype.handleSuperTileTap=function(e,t,o){var n=this.getSuperTileId(e,t);if(!n)return null;var r=o||{superTileChainSteps:[]};Array.isArray(r.superTileQueue)||(r.superTileQueue=[]),r.superTileQueue.push({id:n,row:e,col:t,depth:0}),r.depth=0;var i=this.processSuperTileQueueInternal(r);return i?(this.decreaseMoves(),{removed:i.removed,score:this.score,targetScore:this.targetScore,remainingMoves:this.remainingMoves,scoreDelta:i.scoreDelta}):null},e.prototype.handleColorTileTap=function(e,t,o){if(!this.isColor(o))return null;var n=this.collectGroup(e,t,o);if(n.length<2)return null;var r=this.removeGroupCells(n);this.createSuperTileIfNeeded(e,t,n.length);var i=this.calculateGroupScore(n.length);return this.applyScore(i),this.decreaseMoves(),{removed:r,score:this.score,targetScore:this.targetScore,remainingMoves:this.remainingMoves,scoreDelta:i}},e.prototype.removeGroupCells=function(e){for(var t=[],o=0;o<e.length;o++){var n=e[o];t.push({row:n.row,col:n.col}),this.board[n.row][n.col]=null}return t},e.prototype.createSuperTileIfNeeded=function(e,t,o){if(this.getSuperTileTypeForSize){var n=this.getSuperTileTypeForSize(o);n&&this.isInside(e,t)&&(this.board[e][t]=n)}},e.prototype.handleBooster=function(e,t){if(this.remainingMoves<=0)return null;if(this.targetScore>0&&this.score>=this.targetScore)return null;if(!this.boosterExtensionFactory)throw new Error("BoosterExtensionFactory is not initialized");var o=this.boosterExtensionFactory.get(e);if(!o)throw new Error("Booster extension not found for id: "+e);var n=o.handle(this,t);return n?(this.decreaseMoves(),n):null},e.prototype.handleSuperTileInternal=function(e,t,o,n){if(!this.superTileExtensionFactory)throw new Error("SupertileExtensionFactory is not initialized");var r=this.superTileExtensionFactory.get(e);if(!r)throw new Error("Supertile extension not found for id: "+e);return r.handle(this,t,o,n)},e.prototype.processSuperTileQueueInternal=function(e){if(!(e&&"object"==typeof e&&"superTileQueue"in e&&Array.isArray(e.superTileQueue)))throw new Error("Invalid SuperTileData: superTileQueue is missing or not an array");var t=e.superTileQueue;if(0===t.length)return null;for(var o=[],n={},r=this.score;t.length>0;){var i=t.shift();if(i&&i.id){e.depth=i.depth;var s=this.handleSuperTileInternal(i.id,i.row,i.col,e);if(s&&s.removed&&0!==s.removed.length)for(var l=0;l<s.removed.length;l++){var a=s.removed[l],u=a.row+"_"+a.col;n[u]||(n[u]=!0,o.push({row:a.row,col:a.col}))}}}if(0===o.length)return null;var c=this.score-r;return{removed:o,score:this.score,targetScore:this.targetScore,remainingMoves:this.remainingMoves,scoreDelta:c}},e.prototype.processSuperTileQueuePublic=function(e){return this.processSuperTileQueueInternal(e)},e.prototype.isInsidePublic=function(e,t){return!(e<0||e>=this.rows||t<0||t>=this.cols)},e.prototype.isInside=function(e,t){return this.isInsidePublic(e,t)},e.prototype.getRows=function(){return this.rows},e.prototype.getCols=function(){return this.cols},e.prototype.getCellValue=function(e,t){return this.isInsidePublic(e,t)?this.board[e][t]:null},e.prototype.setCellValue=function(e,t,o){this.isInsidePublic(e,t)&&(this.board[e][t]=o)},e.prototype.calculateGroupScorePublic=function(e){return this.calculateGroupScore(e)},e.prototype.applyScorePublic=function(e){this.applyScore(e)},e.prototype.hasSameColorNeighbor=function(e,t,o){if(this.isSuperTile(e,t))return!1;for(var n=this.getNeighbors(e,t),r=0;r<n.length;r++){var i=n[r];if(i){var s=this.board[i.row][i.col];if(null!==s&&!this.isSuperTile(i.row,i.col)&&this.isColor(s)&&s===o)return!0}}return!1},e.prototype.randomColorKey=function(){if(!this.colors||0===this.colors.length)return"default";var e=Math.floor(Math.random()*this.colors.length);return this.colors[e]},e.prototype.collectGroup=function(e,t,o){if(this.isSuperTile(e,t))return[];for(var n=[],r=[],i=[],s=0;s<this.rows;s++){r[s]=[];for(var l=0;l<this.cols;l++)r[s][l]=!1}for(i.push({row:e,col:t});i.length>0;){var a=i.pop();if(!r[a.row][a.col]){r[a.row][a.col]=!0,n.push(a);for(var u=this.getNeighbors(a.row,a.col),c=0;c<u.length;c++){var p=u[c];if(p&&!r[p.row][p.col]){var f=this.board[p.row][p.col];null!==f&&(this.isSuperTile(p.row,p.col)||this.isColor(f)&&f===o&&i.push(p))}}}}return n},e.prototype.getNeighbors=function(e,t){var o=[];return this.isInside(e+1,t)?o.push({row:e+1,col:t}):o.push(null),this.isInside(e-1,t)?o.push({row:e-1,col:t}):o.push(null),this.isInside(e,t+1)?o.push({row:e,col:t+1}):o.push(null),this.isInside(e,t-1)?o.push({row:e,col:t-1}):o.push(null),o},e.prototype.applyGravityAndRefill=function(){for(var e=0;e<this.cols;e++){for(var t=0,o=0;o<this.rows;o++){var n=this.board[o][e];null!==n&&(o!==t&&(this.board[t][e]=n,this.board[o][e]=null),t++)}for(o=t;o<this.rows;o++)this.board[o][e]=this.randomColorKey()}},e.prototype.calculateGroupScore=function(e){return e<=0?0:e*e},e.prototype.applyScore=function(e){if(!(e<=0))if(this.targetScore>0){var t=this.score+e;t>=this.targetScore?this.score=this.targetScore:this.score=t}else this.score+=e},e.prototype.decreaseMoves=function(){this.remainingMoves<=0||this.remainingMoves--},e.prototype.shuffleBoard=function(){for(var e=[],t=0;t<this.rows;t++)for(var o=0;o<this.cols;o++){var n=this.board[t][o];null!==n&&e.push(n)}for(var r=e.length-1;r>0;r--){var i=Math.floor(Math.random()*(r+1)),s=e[r];e[r]=e[i],e[i]=s}var l=0;for(t=0;t<this.rows;t++)for(o=0;o<this.cols;o++)null!==this.board[t][o]&&(this.board[t][o]=e[l++])},e.prototype.isSuperTile=function(e,t){if(!this.isInside(e,t))return!1;var o=this.board[e][t];return null!==o&&!this.isColor(o)},e.prototype.getSuperTileId=function(e,t){if(!this.isInside(e,t))return null;var o=this.board[e][t];return null===o?null:this.isColor(o)?null:o},e.prototype.isColor=function(e){return null!==e&&this.colors.indexOf(e)>=0},e}();o.default=i,cc._RF.pop()},{"../../Input/TileInputEventType":"TileInputEventType","./IGameModel":"IGameModel"}],BombBoosterConfig:[function(e,t,o){"use strict";cc._RF.push(t,"d4cd0F4511Bnq7aLnxYbIwi","BombBoosterConfig"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],BombBoosterController:[function(e,t,o){"use strict";cc._RF.push(t,"36383q4LkJFcpxaZR44yZbP","BombBoosterController");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function l(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(l){i=[6,l],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../UI/BoosterButtonView"),s=e("../Constants/GameConstants"),l=function(){function e(){this.overlay=null,this.hintLabel=null,this.boostersPanel=null,this.gameCore=null,this.bombSpriteFrame=null,this.bombButton=null,this.buttonView=null,this.active=!1,this.bombInProgress=!1}return e.prototype.init=function(e,t,o,n,r,s){var l=this;if(this.overlay=e,this.hintLabel=t,this.boostersPanel=o,this.gameCore=n,this.bombButton=s,!(r&&"object"==typeof r&&"bombSprite"in r))throw new Error("BombBoosterConfig is incorrect");var a=r.bombSprite;cc.resources.load(a,cc.SpriteFrame,function(e,t){!e&&t&&(l.bombSpriteFrame=t)}),this.overlay&&(this.overlay.active=!1,this.overlay.on(cc.Node.EventType.TOUCH_END,this.onOverlayTouch,this)),this.hintLabel&&(this.hintLabel.active=!1),this.bombButton&&(this.bombButton.on(cc.Node.EventType.TOUCH_END,this.onBombButtonClick,this),this.buttonView=this.bombButton.getComponent(i.default))},e.prototype.onBombButtonClick=function(){this.active||this.buttonView&&!this.buttonView.canUse()||this.enterBombMode()},e.prototype.enterBombMode=function(){this.active=!0,this.overlay.active=!0,this.hintLabel.active=!0,this.boostersPanel&&(this.boostersPanel.active=!1)},e.prototype.exitBombMode=function(){this.active=!1,this.overlay.active=!1,this.hintLabel.active=!1,this.boostersPanel&&!this.gameCore.isGameEnded()&&(this.boostersPanel.active=!0)},e.prototype.onOverlayTouch=function(){this.active&&(this.bombInProgress||this.exitBombMode())},e.prototype.handleTileTap=function(e){var t=this;return!(!this.active||!this.bombInProgress&&(this.gameCore.useBooster&&this.bombSpriteFrame?(this.hintLabel&&(this.hintLabel.active=!1),this.bombInProgress=!0,this.gameCore.useBooster(s.BoosterIds.BOMB,{row:e.row,col:e.col,bombSpriteFrame:this.bombSpriteFrame,preAnimation:function(o,i){return n(t,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return o&&(t=o.getTile(e.row,e.col))&&t.node?(o.setTileSprite(t,this.bombSpriteFrame),i&&i.playBombBurnAnimation&&this.bombSpriteFrame?[4,i.playBombBurnAnimation(t.node,1.5)]:[2]):[2];case 1:return n.sent(),[2]}})})}},function(){t.buttonView&&t.buttonView.consume(),t.bombInProgress=!1,t.exitBombMode()}),0):(this.exitBombMode(),0)))},e}();o.default=l,cc._RF.pop()},{"../../UI/BoosterButtonView":"BoosterButtonView","../Constants/GameConstants":"GameConstants"}],BombBoosterExtension:[function(e,t,o){"use strict";cc._RF.push(t,"27c29IrqN5BFr7K0ZXEQ9+6","BombBoosterExtension"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Types/TypeGuards"),r=e("../Constants/GameConstants"),i=e("../Supertiles/SupertileChainUtils"),s=function(){function e(e){if(this.id=r.BoosterIds.BOMB,!(e&&"object"==typeof e&&"radius"in e&&"number"==typeof e.radius))throw new Error("BombBoosterExtension requires a radius property");this.radius=e.radius}return e.prototype.handle=function(e,t){if(!n.isBombBoosterData(t))return null;var o=t.row,r=t.col;if(!e.isInsidePublic(o,r))return null;for(var s=n.isChainData(t.chainData)?t.chainData:null,l=i.createRemovedCellTracker(),a=[],u=e.getScore(),c=0,p=o-this.radius;p<=o+this.radius;p++)for(var f=r-this.radius;f<=r+this.radius;f++)if(e.isInsidePublic(p,f)&&null!==e.getCellValue(p,f))if(e.isSuperTile(p,f)){var h=e.getSuperTileId(p,f);if(!h||!s)continue;i.addSuperTileToQueue(s,h,p,f)}else e.setCellValue(p,f,null),l.pushRemoved(p,f),a.push({row:p,col:f}),c++;return 0===l.removed.length?null:(i.addDirectStepToChain(s,a),i.processSuperTileQueue(e,s,l),i.calculateAndApplyScore(e,c),i.createBlastGameStepResult(e,l.removed,u))},e}();o.default=s,cc._RF.pop()},{"../Constants/GameConstants":"GameConstants","../Supertiles/SupertileChainUtils":"SupertileChainUtils","../Types/TypeGuards":"TypeGuards"}],BoosterButtonView:[function(e,t,o){"use strict";cc._RF.push(t,"625c4v5kAtH4r3MtzKpteNz","BoosterButtonView");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,a=s.property,u=e("../DI/DiContainer"),c=e("../DI/DiTokens"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boosterId="",t.iconSprite=null,t.countLabel=null,t.currentCount=0,t.boostersConfig=null,t.profile=null,t}return r(t,e),t.prototype.onLoad=function(){this.resolveBoostersConfig(),this.resolveProfile()},t.prototype.initFromConfig=function(e){this.boosterId=e||"",this.resolveBoostersConfig(),this.resolveProfile(),this.applyConfig()},t.prototype.resolveBoostersConfig=function(){var e=u.default.instance;e.has(c.default.BoostersConfig)&&(this.boostersConfig=e.resolve(c.default.BoostersConfig))},t.prototype.resolveProfile=function(){var e=u.default.instance;e.has(c.default.PlayerProfile)&&(this.profile=e.resolve(c.default.PlayerProfile))},t.prototype.applyConfig=function(){var e=this;if(this.boosterId){if(this.boostersConfig){var t=this.boostersConfig.getBoosterConfig(this.boosterId);if(t){var o=t.boosterIcon;if("string"==typeof o&&o.trim().length>0&&this.iconSprite){var n=o.trim();cc.resources.load(n,cc.SpriteFrame,function(t,o){t||e.iconSprite&&e.iconSprite.node&&e.iconSprite.node.isValid&&(e.iconSprite.spriteFrame=o)})}}}this.profile&&(this.currentCount=this.profile.getBoosterCount(this.boosterId)),this.updateView()}else this.updateView()},t.prototype.updateView=function(){this.countLabel&&(this.countLabel.string=this.currentCount>0?this.currentCount.toString():"0");var e=this.getComponent(cc.Button),t=this.currentCount>0;e&&(e.interactable=t),this.node&&(this.node.opacity=t?255:140)},t.prototype.canUse=function(){return this.currentCount>0},t.prototype.consume=function(){return this.canUse()?(this.currentCount--,this.profile&&this.profile.setBoosterCount(this.boosterId,this.currentCount),this.updateView(),!0):(this.updateView(),!1)},t.prototype.refresh=function(){this.boosterId&&(this.profile&&(this.currentCount=this.profile.getBoosterCount(this.boosterId)),this.updateView())},i([a],t.prototype,"boosterId",void 0),i([a(cc.Sprite)],t.prototype,"iconSprite",void 0),i([a(cc.Label)],t.prototype,"countLabel",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../DI/DiContainer":"DiContainer","../DI/DiTokens":"DiTokens"}],BoosterConfig:[function(e,t,o){"use strict";cc._RF.push(t,"18ce8ankBVKd7vG0RsdplJb","BoosterConfig"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],BoosterData:[function(e,t,o){"use strict";cc._RF.push(t,"f2211TN/XZIp5jl5/dUxWQv","BoosterData"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],BoosterExtensionFactory:[function(e,t,o){"use strict";cc._RF.push(t,"1e89fIv9npMA62qOQ+LN43/","BoosterExtensionFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this.extensions=[],e&&e.length>0&&(this.extensions=e.slice())}return e.prototype.register=function(e){e&&(this.extensions.indexOf(e)>=0||this.extensions.push(e))},e.prototype.get=function(e){if(!e)return null;var t=e.trim();if(!t)return null;for(var o=0;o<this.extensions.length;o++){var n=this.extensions[o];if(n&&n.id&&n.id===t)return n}return null},e}();o.default=n,cc._RF.pop()},{}],BoostersConfigList:[function(e,t,o){"use strict";cc._RF.push(t,"5058bhhhGNFhZPKsV3m6eAB","BoostersConfigList");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./ConfigList"),l=cc._decorator.ccclass,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getBoosterConfig=function(e){for(var t=0;t<this._configs.length;t++){var o=this._configs[t];if(o&&o.id===e)return o}throw new Error("No booster config for id "+e)},i([l],t)}(s.default);o.default=a,cc._RF.pop()},{"./ConfigList":"ConfigList"}],BoostersControllersFactory:[function(e,t,o){"use strict";cc._RF.push(t,"aa83b/+na9M06zcWWhh9zLB","BoostersControllersFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BombBoosterController"),r=e("./TeleportBoosterController"),i=e("../../DI/DiContainer"),s=e("../../DI/DiTokens"),l=e("../Constants/GameConstants"),a=function(){function e(){}return e.prototype.createControllers=function(e,t,o,a){var u=o.node,c=i.default.instance,p=function(i){var p=void 0,f=void 0;switch(i){case l.BoosterIds.BOMB:p=new n.default,f=s.default.BombBooster;break;case l.BoosterIds.TELEPORT:p=new r.default,f=s.default.TeleportBooster;break;default:throw new Error("Not identified booster "+i)}p.init(o.activeBoosterOverlay,o.activeBoosterHintLabel,u,a,e.find(function(e){return e.id===i}),t[i].node),c.register(f,p)};for(var f in t)p(f)},e}();o.default=a,cc._RF.pop()},{"../../DI/DiContainer":"DiContainer","../../DI/DiTokens":"DiTokens","../Constants/GameConstants":"GameConstants","./BombBoosterController":"BombBoosterController","./TeleportBoosterController":"TeleportBoosterController"}],BoostersPanelView:[function(e,t,o){"use strict";cc._RF.push(t,"d563cvPifFOnrMHAW2Q5mPO","BoostersPanelView");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,a=s.property,u=e("./BoosterButtonView"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boosterButtonPrefab=null,t.boostersButtonsContainer=null,t.activeBoosterOverlay=null,t.activeBoosterHintLabel=null,t}return r(t,e),t.prototype.initialize=function(e){this.destroyButtons();for(var t={},o=0;o<e.length;o++){var n=e[o],r=cc.instantiate(this.boosterButtonPrefab);this.boostersButtonsContainer.addChild(r);var i=r.getComponent(u.default);i.initFromConfig(n.id),t[i.boosterId]=i}return t},t.prototype.destroyButtons=function(){for(var e=this.boostersButtonsContainer.children.slice(),t=0;t<e.length;t++){var o=e[t];o.getComponent(u.default)&&(o.removeFromParent(),o.destroy())}},t.prototype.refreshAllButtons=function(){if(this.boostersButtonsContainer)for(var e=this.boostersButtonsContainer.children,t=0;t<e.length;t++){var o=e[t].getComponent(u.default);o&&o.refresh()}},i([a(cc.Prefab)],t.prototype,"boosterButtonPrefab",void 0),i([a(cc.Node)],t.prototype,"boostersButtonsContainer",void 0),i([a(cc.Node)],t.prototype,"activeBoosterOverlay",void 0),i([a(cc.Node)],t.prototype,"activeBoosterHintLabel",void 0),i([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"./BoosterButtonView":"BoosterButtonView"}],ConfigList:[function(e,t,o){"use strict";cc._RF.push(t,"75c9cE54WRIqZN9GTHujHvB","ConfigList");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function l(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(l){i=[6,l],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ConfigUtils"),u=cc._decorator.property,c=cc._decorator.ccclass,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.path="",t._configs=[],t.getConfigs=function(){return t._configs.slice()},t}return r(t,e),t.prototype.loadConfigs=function(){return s(this,void 0,Promise,function(){var e;return l(this,function(t){switch(t.label){case 0:return this._configs.length>0?[2]:(e=this,[4,a.LoadConfigsFromDir(this.path)]);case 1:return e._configs=t.sent(),[2]}})})},i([u],t.prototype,"path",void 0),i([c],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./ConfigUtils":"ConfigUtils"}],ConfigUtils:[function(e,t,o){"use strict";cc._RF.push(t,"6885beFpO5Lk6+uNx7aPHJ1","ConfigUtils");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function l(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(l){i=[6,l],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.LoadConfigsFromDir=void 0,o.LoadConfigsFromDir=function(e){return n(this,void 0,Promise,function(){var t,o,n,i;return r(this,function(r){switch(r.label){case 0:return[4,new Promise(function(t,o){cc.resources.loadDir(e,cc.JsonAsset,function(e,n){e?o(e):t(n||[])})})];case 1:for(t=r.sent(),o=[],n=0;n<t.length;n++)(i=t[n])&&o.push(i.json);return[2,o]}})})},cc._RF.pop()},{}],DiContainer:[function(e,t,o){"use strict";cc._RF.push(t,"394c8fQpQBPp6ejxlKF6V6P","DiContainer"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.services=new Map}return Object.defineProperty(e,"instance",{get:function(){return e.instanceValue},enumerable:!1,configurable:!0}),e.prototype.register=function(e,t){this.services.set(e,t)},e.prototype.resolve=function(e){return this.services.get(e)},e.prototype.has=function(e){return this.services.has(e)},e.instanceValue=new e,e}();o.default=n,cc._RF.pop()},{}],DiInitializer:[function(e,t,o){"use strict";cc._RF.push(t,"e53a8exse5Akqx6jmKSHow9","DiInitializer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function l(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(l){i=[6,l],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,u=a.ccclass,c=a.property,p=a.executeInEditMode,f=e("./DiContainer"),h=e("./DiTokens"),d=e("../Config/FieldViewConfigComponent"),v=e("../Config/LevelsConfigList"),y=e("../Config/BoostersConfigList"),g=e("../PlayerProfile"),b=e("../Config/TileColorConfig"),m=e("../Config/SupertilesConfigList"),C=e("../GameCore/GameController"),_=e("../GameCore/Models/GameModelFactory"),w=e("../GameCore/Animations/BlastAnimationView"),S=e("../GameCore/ShuffleNoMovesResolver"),T=e("../GameCore/FieldView"),B=e("../Input/TapInput"),P=e("../UI/BoostersPanelView"),R=e("../GameCore/Boosters/BoostersControllersFactory"),F=e("../GameCore/TileSpriteDictionary"),I=e("../UI/GameUI"),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rebuild=!1,t.fieldViewConfigComponent=null,t.levelsConfigList=null,t.tileColorConfig=null,t.boostersConfig=null,t.superTilesConfig=null,t.boostersPanel=null,t.gameUI=null,t.enableShuffle=!0,t}return r(t,e),t.prototype.onLoad=function(){return s(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return f.default.instance.register(h.default.DiInitializer,this),[4,this.levelsConfigList.loadConfigs()];case 1:return e.sent(),this.initialize(),[2]}})})},t.prototype.initialize=function(){return s(this,void 0,void 0,function(){var e,t;return l(this,function(o){switch(o.label){case 0:return(e=f.default.instance).register(h.default.MainGameConfig,this.fieldViewConfigComponent),e.register(h.default.LevelsConfigList,this.levelsConfigList),e.register(h.default.TileColorConfig,this.tileColorConfig),e.register(h.default.BoostersConfig,this.boostersConfig),e.register(h.default.SuperTilesConfig,this.superTilesConfig),e.register(h.default.GameUI,this.gameUI),[4,this.superTilesConfig.loadConfigs()];case 1:return o.sent(),t=this.initTilesDictionary(),e.register(h.default.TileSpriteDictionary,t),[4,this.initSupertiles(t)];case 2:return o.sent(),[4,this.boostersConfig.loadConfigs()];case 3:return o.sent(),[4,this.buildAndStartGame()];case 4:return o.sent(),[2]}})})},t.prototype.initTilesDictionary=function(){for(var e=this.tileColorConfig?this.tileColorConfig.defaultSprite:null,t=new F.default(e),o=this.tileColorConfig.keys||[],n=this.tileColorConfig.sprites||[],r=Math.min(o.length,n.length),i=0;i<r;i++){var s=o[i],l=n[i];s&&l&&t.register(s,l)}return t},t.prototype.buildAndStartGame=function(){return s(this,void 0,Promise,function(){var e,t,o,n,r,i,s,a;return l(this,function(){if(e=f.default.instance,this.registerGameModelFactory(e),this.gameUI.init(),t=this.getOrCreatePlayerProfile(e),!(o=this.getLevelConfig(t)))throw new Error("LevelConfig not found");return n=this.fieldViewConfigComponent.getMainGameConfig(),r=o.initialField,i=this.createGameModel(e,o),s=this.createFieldView(e,o,n),a=this.createGameController(i,s,r),e.register(h.default.GameController,a),this.setupInput(e,a),t.ensureBoostersInitialized(this.boostersConfig),a.init(),this.initializeBoosters(a),[2]})})},t.prototype.registerGameModelFactory=function(e){var t=new _.default(e);e.register(h.default.GameModelFactory,t)},t.prototype.getOrCreatePlayerProfile=function(e){if(e.has(h.default.PlayerProfile))return e.resolve(h.default.PlayerProfile);var t=new g.default;return e.register(h.default.PlayerProfile,t),t},t.prototype.getLevelConfig=function(e){var t=e.getCurrentLevelIndex();return this.levelsConfigList.getLevelConfigByIndex(t)},t.prototype.createGameModel=function(e,t){return e.resolve(h.default.GameModelFactory).create(t,this.superTilesConfig,this.boostersConfig)},t.prototype.createFieldView=function(e,t,o){var n=e.resolve(h.default.TileSpriteDictionary);return new T.default(t.rows,t.cols,o,n)},t.prototype.createGameController=function(e,t,o){var n=new w.default,r=this.enableShuffle?new S.default(3):null;return new C.default(e,this.gameUI,t,n,r,o)},t.prototype.setupInput=function(e,t){var o=new B.default(t);e.register(h.default.Input,o),o.init()},t.prototype.initSupertiles=function(e){return s(this,void 0,void 0,function(){var t,o,n,r;return l(this,function(i){switch(i.label){case 0:for(t=this.superTilesConfig.getConfigs(),o=[],n=function(n){var r=t[n],i=r.id.trim(),s=r.icon.trim(),l=new Promise(function(t){cc.resources.load(s,cc.SpriteFrame,function(o,n){!o&&n&&e.register(i,n),t()})});o.push(l)},r=0;r<t.length;r++)n(r);return[4,Promise.all(o)];case 1:return i.sent(),[2]}})})},t.prototype.initializeBoosters=function(e){var t=this.boostersConfig.getConfigs(),o=this.boostersPanel.initialize(t);(new R.default).createControllers(t,o,this.boostersPanel,e)},t.prototype.update=function(){return s(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return this.rebuild?(this.rebuild=!1,[4,this.initialize()]):[2];case 1:return e.sent(),[2]}})})},i([c],t.prototype,"rebuild",void 0),i([c(d.default)],t.prototype,"fieldViewConfigComponent",void 0),i([c(v.default)],t.prototype,"levelsConfigList",void 0),i([c(b.default)],t.prototype,"tileColorConfig",void 0),i([c(y.default)],t.prototype,"boostersConfig",void 0),i([c(m.default)],t.prototype,"superTilesConfig",void 0),i([c(P.default)],t.prototype,"boostersPanel",void 0),i([c(I.default)],t.prototype,"gameUI",void 0),i([c],t.prototype,"enableShuffle",void 0),i([u,p],t)}(cc.Component);o.default=O,cc._RF.pop()},{"../Config/BoostersConfigList":"BoostersConfigList","../Config/FieldViewConfigComponent":"FieldViewConfigComponent","../Config/LevelsConfigList":"LevelsConfigList","../Config/SupertilesConfigList":"SupertilesConfigList","../Config/TileColorConfig":"TileColorConfig","../GameCore/Animations/BlastAnimationView":"BlastAnimationView","../GameCore/Boosters/BoostersControllersFactory":"BoostersControllersFactory","../GameCore/FieldView":"FieldView","../GameCore/GameController":"GameController","../GameCore/Models/GameModelFactory":"GameModelFactory","../GameCore/ShuffleNoMovesResolver":"ShuffleNoMovesResolver","../GameCore/TileSpriteDictionary":"TileSpriteDictionary","../Input/TapInput":"TapInput","../PlayerProfile":"PlayerProfile","../UI/BoostersPanelView":"BoostersPanelView","../UI/GameUI":"GameUI","./DiContainer":"DiContainer","./DiTokens":"DiTokens"}],DiTokens:[function(e,t,o){"use strict";cc._RF.push(t,"b64bdW4KvdIY6vvDsUxWNFQ","DiTokens"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.GameController="GameCore",e.Input="Input",e.MainGameConfig="MainGameConfig",e.LevelsConfigList="LevelsConfigList",e.TileColorConfig="TileColorConfig",e.DiInitializer="DiInitializer",e.BombBooster="BombBooster",e.TeleportBooster="TeleportBooster",e.BoostersConfig="BoostersConfig",e.PlayerProfile="PlayerProfile",e.SuperTilesConfig="SuperTilesConfig",e.TileSpriteDictionary="TileSpriteDictionary",e.GameModelFactory="GameModelFactory",e.GameUI="GameUI",e}();o.default=n,cc._RF.pop()},{}],DynamiteMaxSupertileExtension:[function(e,t,o){"use strict";cc._RF.push(t,"7916cqbzL9IoIS9g76BC7jL","DynamiteMaxSupertileExtension"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./SupertileChainUtils"),r=e("../Constants/GameConstants"),i=function(){function e(){this.id=r.SupertileIds.DYNAMITE_MAX}return e.prototype.handle=function(e,t,o,r){for(var i=n.getChainDataFromSuperTileData(r),s=n.createRemovedCellTracker(),l=[],a=e.getScore(),u=0,c=0;c<e.getRows();c++)for(var p=0;p<e.getCols();p++)if(null!==e.getCellValue(c,p))if(c!==t||p!==o)if(e.isSuperTile(c,p)){var f=e.getSuperTileId(c,p);if(!f||!i)continue;n.addSuperTileToQueue(i,f,c,p)}else e.setCellValue(c,p,null),s.pushRemoved(c,p),l.push({row:c,col:p}),u++;else e.setCellValue(c,p,null),s.pushRemoved(c,p),l.push({row:c,col:p}),u++;return 0===s.removed.length?null:(n.addDirectStepToChain(i,l),n.processSuperTileQueue(e,i,s),n.calculateAndApplyScore(e,u),n.createBlastGameStepResult(e,s.removed,a))},e}();o.default=i,cc._RF.pop()},{"../Constants/GameConstants":"GameConstants","./SupertileChainUtils":"SupertileChainUtils"}],DynamiteSupertileConfig:[function(e,t,o){"use strict";cc._RF.push(t,"b44a7KyvShBRrRpNU3WJB0r","DynamiteSupertileConfig"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],DynamiteSupertileExtension:[function(e,t,o){"use strict";cc._RF.push(t,"da77czbzoVHBo4Mc/5vTXAv","DynamiteSupertileExtension"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./SupertileChainUtils"),r=e("../Constants/GameConstants"),i=function(){function e(e){if(this.id=r.SupertileIds.DYNAMITE,!(e&&"object"==typeof e&&"radius"in e&&"number"==typeof e.radius))throw new Error("DynamiteSupertileExtension requires a radius property");this.radius=e.radius}return e.prototype.handle=function(e,t,o,r){if(!e.isInsidePublic(t,o))return null;for(var i=n.getChainDataFromSuperTileData(r),s=n.createRemovedCellTracker(),l=[],a=e.getScore(),u=0,c=t-this.radius;c<=t+this.radius;c++)for(var p=o-this.radius;p<=o+this.radius;p++)if(e.isInsidePublic(c,p)&&null!==e.getCellValue(c,p))if(c!==t||p!==o)if(e.isSuperTile(c,p)){var f=e.getSuperTileId(c,p);if(!f||!i)continue;n.addSuperTileToQueue(i,f,c,p)}else e.setCellValue(c,p,null),s.pushRemoved(c,p),l.push({row:c,col:p}),u++;else e.setCellValue(c,p,null),s.pushRemoved(c,p),l.push({row:c,col:p}),u++;return 0===s.removed.length?null:(n.addDirectStepToChain(i,l),n.processSuperTileQueue(e,i,s),n.calculateAndApplyScore(e,u),n.createBlastGameStepResult(e,s.removed,a))},e}();o.default=i,cc._RF.pop()},{"../Constants/GameConstants":"GameConstants","./SupertileChainUtils":"SupertileChainUtils"}],EndGamePanel:[function(e,t,o){"use strict";cc._RF.push(t,"6e423+u1CVCs5DytlQGGQEG","EndGamePanel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,a=s.property,u=e("../DI/DiContainer"),c=e("../DI/DiTokens"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.winState=null,t.loseState=null,t}return r(t,e),t.prototype.showWin=function(){this.node.active=!0,this.winState&&(this.winState.active=!0),this.loseState&&(this.loseState.active=!1)},t.prototype.showLose=function(){this.node.active=!0,this.winState&&(this.winState.active=!1),this.loseState&&(this.loseState.active=!0)},t.prototype.onRestartClick=function(){this.restartWithCurrentLevel()},t.prototype.onNextClick=function(){if(u.default.instance.has(c.default.PlayerProfile)&&u.default.instance.has(c.default.LevelsConfigList)){var e=u.default.instance.resolve(c.default.LevelsConfigList);if(e){var t=e.getConfigs();if(t&&0!==t.length){var o=u.default.instance.resolve(c.default.PlayerProfile),n=(o.getCurrentLevelIndex()+1)%t.length;o.setCurrentLevelIndex(n),this.restartWithCurrentLevel()}}}},t.prototype.restartWithCurrentLevel=function(){if(u.default.instance.has(c.default.DiInitializer)){var e=u.default.instance.resolve(c.default.DiInitializer);e&&(e.rebuild=!0)}},i([a(cc.Node)],t.prototype,"winState",void 0),i([a(cc.Node)],t.prototype,"loseState",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../DI/DiContainer":"DiContainer","../DI/DiTokens":"DiTokens"}],FieldViewConfigComponent:[function(e,t,o){"use strict";cc._RF.push(t,"3ee5fOoIC1Av4huhhVReFC0","FieldViewConfigComponent");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,a=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.json=null,t}return r(t,e),t.prototype.getMainGameConfig=function(){return this.json.json},i([a(cc.JsonAsset)],t.prototype,"json",void 0),i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],FieldView:[function(e,t,o){"use strict";cc._RF.push(t,"d0c089JBK1NRaGcN30ZVe7L","FieldView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Tile"),r=function(){function e(e,t,o,n){this.tilesRoot=null,this.tiles=[],this.tileSpriteDictionary=null,this.rows=e,this.cols=t,this.tileSize=o.tileSize,this.tileSpacing=o.tileSpacing,this.tileSpriteDictionary=n}return e.prototype.init=function(e){this.tilesRoot=new cc.Node,this.tilesRoot.name="TilesRoot",e.addChild(this.tilesRoot)},e.prototype.rebuild=function(e){this.tilesRoot.removeAllChildren(),this.tiles=[];for(var t=0;t<this.rows;t++){this.tiles[t]=[];for(var o=0;o<this.cols;o++){var n=e[t][o];if(null!==n){var r=this.normalizeKey(n),i=this.createTile(t,o,r);this.tiles[t][o]=i}else this.tiles[t][o]=null}}},e.prototype.getTile=function(e,t){return e<0||e>=this.rows?null:t<0||t>=this.cols?null:this.tiles[e][t]},e.prototype.getCellAtPosition=function(e){var t=this.cols*this.tileSize+(this.cols-1)*this.tileSpacing,o=this.rows*this.tileSize+(this.rows-1)*this.tileSpacing,n=.5*-t+.5*this.tileSize,r=.5*-o+.5*this.tileSize,i=this.tileSize+this.tileSpacing,s=Math.floor((e.x-n+.5*this.tileSize)/i),l=Math.floor((e.y-r+.5*this.tileSize)/i);return l<0||l>=this.rows||s<0||s>=this.cols?null:{row:l,col:s}},e.prototype.setTileSuperAppearance=function(e,t){var o=e.node.getComponent(cc.Sprite);o&&t&&(o.spriteFrame=t)},e.prototype.setTileSprite=function(e,t){e.node.getComponent(cc.Sprite).spriteFrame=t},e.prototype.getTilesInRadius=function(e,t,o){for(var n=[],r=e-o;r<=e+o;r++)for(var i=t-o;i<=t+o;i++){var s=this.getTile(r,i);s&&n.push(s)}return n},e.prototype.playShuffleAnimation=function(e,t){var o=this,n=this.collectTilesForShuffle();0!==n.length?setTimeout(function(){o.animateTilesToCenter(n,function(){o.updateTilesAfterShuffle(n,e),o.animateTilesFromCenter(n,t)})},250):t()},e.prototype.collectTilesForShuffle=function(){for(var e=[],t=0;t<this.rows;t++)for(var o=0;o<this.cols;o++){var n=this.tiles[t][o];n&&e.push(n)}return e},e.prototype.animateTilesToCenter=function(e,t){for(var o=this.getCenterPosition(),n=0,r=function(){++n>=e.length&&t()},i=0;i<e.length;i++){var s=e[i];cc.tween(s.node).to(.25,{position:o}).call(r).start()}},e.prototype.updateTilesAfterShuffle=function(e,t){for(var o=0;o<e.length;o++){var n=e[o],r=Math.floor(o/this.cols),i=o%this.cols,s=t[r][i];if(null!==s){var l=this.normalizeKey(s);n.row=r,n.col=i,n.tileType=l,this.updateTileAppearance(n,l)}}for(var a=[],u=0;u<this.rows;u++){a[u]=[];for(var c=0;c<this.cols;c++)a[u][c]=null}for(o=0;o<e.length;o++)a[(n=e[o]).row][n.col]=n;this.tiles=a;var p=this.getCenterPosition();for(o=0;o<e.length;o++)(n=e[o]).node.setPosition(p)},e.prototype.animateTilesFromCenter=function(e,t){for(var o=0,n=function(){++o>=e.length&&t()},r=0;r<e.length;r++){var i=e[r],s=this.getPositionForCell(i.row,i.col);cc.tween(i.node).to(.25,{position:s}).call(n).start()}},e.prototype.getCenterPosition=function(){return cc.v3(0,0,0)},e.prototype.getPositionForCell=function(e,t){var o=this.cols*this.tileSize+(this.cols-1)*this.tileSpacing,n=this.rows*this.tileSize+(this.rows-1)*this.tileSpacing,r=.5*-o+.5*this.tileSize,i=.5*-n+.5*this.tileSize,s=r+t*(this.tileSize+this.tileSpacing),l=i+e*(this.tileSize+this.tileSpacing);return cc.v3(s,l,0)},e.prototype.updateTileAppearance=function(e,t){e.tileType=t;var o=this.spriteForKey(t);e.node.getComponent(cc.Sprite).spriteFrame=o},e.prototype.createTile=function(e,t,o){var r=new cc.Node,i=r.addComponent(cc.Sprite),s=this.spriteForKey(o);i.spriteFrame=s,i.sizeMode=cc.Sprite.SizeMode.CUSTOM,r.setContentSize(this.tileSize,this.tileSize);var l=r.addComponent(n.default);return l.row=e,l.col=t,l.tileType=o,this.tilesRoot.addChild(r),this.updateTilePosition(l),l},e.prototype.updateTilePosition=function(e){e.node.position=this.getPositionForCell(e.row,e.col)},e.prototype.normalizeKey=function(e){if(null===e)return"default";var t=e.trim();return t.length>0?t:"default"},e.prototype.spriteForKey=function(e){return this.tileSpriteDictionary.get(e)},e}();o.default=r,cc._RF.pop()},{"../Tile":"Tile"}],GameConstants:[function(e,t,o){"use strict";cc._RF.push(t,"e22053zXsVM0LwKTMLf0q+E","GameConstants"),Object.defineProperty(o,"__esModule",{value:!0}),o.SupertileIds=o.BoosterIds=void 0;var n=function(){function e(){}return e.BOMB="bomb",e.TELEPORT="teleport",e}();o.BoosterIds=n;var r=function(){function e(){}return e.ROCKET_H="rocketH",e.ROCKET_V="rocketV",e.DYNAMITE="dynamite",e.DYNAMITE_MAX="dynamiteMax",e}();o.SupertileIds=r,cc._RF.pop()},{}],GameController:[function(e,t,o){"use strict";cc._RF.push(t,"2e875t1O3ZPrZ77bFCWX2Ux","GameController");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function l(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(l){i=[6,l],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Input/TileInputEventType"),s=function(){function e(e,t,o,n,r,i){this.model=null,this.ui=null,this.animationView=null,this.fieldView=null,this.noMovesResolver=null,this.initialField=null,this.isAnimating=!1,this.model=e,this.ui=t,this.fieldView=o,this.animationView=n,this.noMovesResolver=void 0===r?null:r,this.initialField=void 0===i?null:i}return e.prototype.init=function(){var e=this;this.model.init(this.initialField),this.fieldView.init(this.ui.getRootNode()),this.fieldView.rebuild(this.model.getBoard()),this.ensureMovesAvailable(function(){e.updateMovesView(),e.updateScoreView()})},e.prototype.ensureMovesAvailable=function(e){var t=this;if(this.noMovesResolver){var o=function(e){t.model.shuffleBoard(),t.fieldView.playShuffleAnimation(t.model.getBoard(),e)},n=function(){t.model.hasAvailableMoves()?e():t.noMovesResolver.tryResolve(o,n)||t.ui&&t.ui.lose()};n()}else e()},e.prototype.getSupportedEvents=function(){return this.model.getSupportedEvents()},e.prototype.handleEvent=function(e){if(!this.isAnimating){var t=this.model.handleEvent(e);t?this.playEventAnimations(t,e.onComplete).catch(function(e){throw console.error("Error in playEventAnimations:",e),e}):e.onComplete&&e.onComplete()}},e.prototype.playEventAnimations=function(e,t){return n(this,void 0,Promise,function(){var o;return r(this,function(n){switch(n.label){case 0:this.isAnimating=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.animationView.playEventAnimations(e,this.fieldView)];case 2:return n.sent(),this.updateFieldAfterAnimation(),this.isAnimating=!1,this.checkEndGame(),t&&t(),[3,4];case 3:throw o=n.sent(),this.isAnimating=!1,o;case 4:return[2]}})})},e.prototype.updateFieldAfterAnimation=function(){this.fieldView.rebuild(this.model.getBoard()),this.updateUI(),this.model.applyGravityAndRefill(),this.fieldView.rebuild(this.model.getBoard())},e.prototype.updateUI=function(){this.updateMovesView(),this.updateScoreView()},e.prototype.getRemainingMoves=function(){return this.model.getRemainingMoves()},e.prototype.getScore=function(){return this.model.getScore()},e.prototype.getTargetScore=function(){return this.model.getTargetScore()},e.prototype.addMoves=function(e){this.model.addMoves(e),this.updateMovesView()},e.prototype.isGameEnded=function(){var e=this.model.getTargetScore();if(e<=0)return!1;var t=this.model.getScore(),o=this.model.getRemainingMoves();return t>=e||o<=0&&t<e},e.prototype.getCellAtPosition=function(e){var t=this.ui.getRootNode().convertToNodeSpaceAR(e);return this.fieldView.getCellAtPosition?this.fieldView.getCellAtPosition(t):null},e.prototype.useBooster=function(e,t,o){var n=this.getTileFromBoosterData(t),r={type:i.default.Booster,tile:n,boosterId:e,boosterData:t,onComplete:o};this.handleEvent(r)},e.prototype.getTileFromBoosterData=function(e){if(e&&"object"==typeof e&&"row"in e&&"number"==typeof e.row&&"col"in e&&"number"==typeof e.col){var t=this.fieldView.getTile(e.row,e.col);if(t)return t}return{row:-1,col:-1,node:null}},e.prototype.checkEndGame=function(){var e=this.getGameState();return this.isWin(e)?(this.handleWin(),!1):this.isLoseByMoves(e)?(this.handleLose(),!1):!!this.isLoseByNoMoves(e)&&this.handleLoseByNoMoves()},e.prototype.getGameState=function(){return{targetScore:this.model.getTargetScore(),score:this.model.getScore(),remainingMoves:this.model.getRemainingMoves(),hasMovesOnBoard:this.model.hasAvailableMoves()}},e.prototype.isWin=function(e){return e.targetScore>0&&e.score>=e.targetScore},e.prototype.isLoseByMoves=function(e){return e.targetScore>0&&e.score<e.targetScore&&e.remainingMoves<=0},e.prototype.isLoseByNoMoves=function(e){return e.targetScore>0&&e.score<e.targetScore&&e.remainingMoves>0&&!e.hasMovesOnBoard},e.prototype.handleWin=function(){this.ui&&this.ui.win()},e.prototype.handleLose=function(){this.ui&&this.ui.lose()},e.prototype.handleLoseByNoMoves=function(){if(!this.noMovesResolver)return this.handleLose(),!1;this.isAnimating=!0;var e=this.createShuffleCallback(),t=this.createShuffleCompleteCallback();return!!this.noMovesResolver.tryResolve(e,t)||(this.isAnimating=!1,this.handleLose(),!1)},e.prototype.createShuffleCallback=function(){var e=this;return function(t){e.model.shuffleBoard(),e.fieldView.playShuffleAnimation(e.model.getBoard(),function(){e.model.applyGravityAndRefill(),e.fieldView.rebuild(e.model.getBoard()),e.updateUI(),e.isAnimating=!1,t()})}},e.prototype.createShuffleCompleteCallback=function(){var e=this;return function(){e.model.hasAvailableMoves()||e.checkEndGame()}},e.prototype.updateMovesView=function(){this.ui&&this.ui.setMoves(this.model.getRemainingMoves())},e.prototype.updateScoreView=function(){this.ui&&this.ui.setScore(this.model.getScore(),this.model.getTargetScore())},e}();o.default=s,cc._RF.pop()},{"../Input/TileInputEventType":"TileInputEventType"}],GameModelFactory:[function(e,t,o){"use strict";cc._RF.push(t,"3ad99gVlK9Jw5O34bciWLgb","GameModelFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BlastGameModel"),r=e("../Supertiles/SupertileExtensionFactory"),i=e("../Boosters/BoosterExtensionFactory"),s=e("../Supertiles/RocketHSupertileExtension"),l=e("../Supertiles/RocketVSupertileExtension"),a=e("../Supertiles/DynamiteSupertileExtension"),u=e("../Supertiles/DynamiteMaxSupertileExtension"),c=e("../Boosters/BombBoosterExtension"),p=e("../Boosters/TeleportBoosterExtension"),f=e("../Constants/GameConstants"),h=function(){function e(e){this.container=e}return e.prototype.create=function(e,t,o){var h=new n.default(e.rows,e.cols,e.colors,e.moves,e.targetScore);h.setSuperTileGenerationCallback(function(e){return t.getSuperTileTypeForSize(e)});var d=new r.default;d.register(new s.default(t.getSuperTileConfig(f.SupertileIds.ROCKET_H))),d.register(new l.default(t.getSuperTileConfig(f.SupertileIds.ROCKET_V)));var v=t.getSuperTileConfig(f.SupertileIds.DYNAMITE);if(!(v&&"object"==typeof v&&"radius"in v))throw new Error("DynamiteSupertileConfig is required");d.register(new a.default(v)),d.register(new u.default(t.getSuperTileConfig(f.SupertileIds.DYNAMITE_MAX))),h.setSuperTileExtensionFactory(d);var y=new i.default;return y.register(new c.default(o.getBoosterConfig(f.BoosterIds.BOMB))),y.register(new p.default(o.getBoosterConfig(f.BoosterIds.TELEPORT))),h.setBoosterExtensionFactory(y),h},e}();o.default=h,cc._RF.pop()},{"../Boosters/BombBoosterExtension":"BombBoosterExtension","../Boosters/BoosterExtensionFactory":"BoosterExtensionFactory","../Boosters/TeleportBoosterExtension":"TeleportBoosterExtension","../Constants/GameConstants":"GameConstants","../Supertiles/DynamiteMaxSupertileExtension":"DynamiteMaxSupertileExtension","../Supertiles/DynamiteSupertileExtension":"DynamiteSupertileExtension","../Supertiles/RocketHSupertileExtension":"RocketHSupertileExtension","../Supertiles/RocketVSupertileExtension":"RocketVSupertileExtension","../Supertiles/SupertileExtensionFactory":"SupertileExtensionFactory","./BlastGameModel":"BlastGameModel"}],GameUI:[function(e,t,o){"use strict";cc._RF.push(t,"45fedWT3rJHH6NMEvlkFuk6","GameUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,a=s.property,u=e("./TopPanelView"),c=e("./EndGamePanel"),p=e("./BoostersPanelView"),f=e("./ActiveBoosterOverlay"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.topPanelView=null,t.endGamePanel=null,t.boostersPanel=null,t.activeBoosterOverlay=null,t.gameRoot=null,t}return r(t,e),t.prototype.init=function(){this.gameRoot.active=!0,this.boostersPanel.node.active=!0,this.topPanelView.setActive(!0),this.endGamePanel.node.active=!1,this.gameRoot.removeAllChildren()},t.prototype.getRootNode=function(){return this.gameRoot},t.prototype.setMoves=function(e){this.topPanelView.setMoves(e)},t.prototype.setScore=function(e,t){this.topPanelView.setPoints(e,t)},t.prototype.win=function(){this.gameRoot.active=!1,this.boostersPanel.node.active=!1,this.topPanelView.setActive(!1),this.endGamePanel.node.active=!0,this.endGamePanel.showWin()},t.prototype.lose=function(){this.gameRoot.active=!1,this.boostersPanel.node.active=!1,this.topPanelView.setActive(!1),this.endGamePanel.node.active=!0,this.endGamePanel.showLose()},i([a(u.default)],t.prototype,"topPanelView",void 0),i([a(c.default)],t.prototype,"endGamePanel",void 0),i([a(p.default)],t.prototype,"boostersPanel",void 0),i([a(f.default)],t.prototype,"activeBoosterOverlay",void 0),i([a(cc.Node)],t.prototype,"gameRoot",void 0),i([l],t)}(cc.Component);o.default=h,cc._RF.pop()},{"./ActiveBoosterOverlay":"ActiveBoosterOverlay","./BoostersPanelView":"BoostersPanelView","./EndGamePanel":"EndGamePanel","./TopPanelView":"TopPanelView"}],IAnimationView:[function(e,t,o){"use strict";cc._RF.push(t,"be621YSrGdEIrKvZ0kX36Ib","IAnimationView"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IBlastGameCoreView:[function(e,t,o){"use strict";cc._RF.push(t,"48ce1Q39DVPh77Qbj/UsP5R","IBlastGameCoreView"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IBoosterController:[function(e,t,o){"use strict";cc._RF.push(t,"cc7f4r9QxFMLoKwnmLTe9vW","IBoosterController"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IBoosterExtension:[function(e,t,o){"use strict";cc._RF.push(t,"94405So5ZROO41vgUXGi9Au","IBoosterExtension"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IFieldView:[function(e,t,o){"use strict";cc._RF.push(t,"326b4FSOR9JP6HUIJO2Yx0m","IFieldView"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameController:[function(e,t,o){"use strict";cc._RF.push(t,"c4e135Y4LdBUbwxJn/2FJH1","IGameController"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameModel:[function(e,t,o){"use strict";cc._RF.push(t,"28786QsG8VHgalJs4J1Owrv","IGameModel"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IGameUi:[function(e,t,o){"use strict";cc._RF.push(t,"cbb9eQg6vpGzIUvgkZFaMvp","IGameUi"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IInput:[function(e,t,o){"use strict";cc._RF.push(t,"76374ThrhZHtKCLcJmkNKPb","IInput"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],INoMovesResolver:[function(e,t,o){"use strict";cc._RF.push(t,"a1b2cPU5fZHiaASNFZ4kBI0","INoMovesResolver"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ISupertileExtension:[function(e,t,o){"use strict";cc._RF.push(t,"a2c19wKpTZBz7+fbYH5rBF9","ISupertileExtension"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],LevelConfig:[function(e,t,o){"use strict";cc._RF.push(t,"f422d5TSgZKPLaQkks689gq","LevelConfig"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],LevelUtils:[function(e,t,o){"use strict";function n(e){if(!e||!Array.isArray(e)||0===e.length)return null;for(var t=[],o=0;o<e.length;o++){var n=[],r=e[o];if(Array.isArray(r))for(var i=0;i<r.length;i++){var s=r[i],l=null;if("string"==typeof s){var a=s.split(":");l=2===a.length?a[0].trim():s.trim()}n.push(l&&l.length>0?l:null)}t.push(n)}return t}cc._RF.push(t,"17b2fCmBGFNeL4zBTUN/MvY","LevelUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.convertLevelConfig=o.parseInitialField=void 0,o.parseInitialField=n,o.convertLevelConfig=function(e){var t=e;if("number"!=typeof t.rows||"number"!=typeof t.cols||!Array.isArray(t.colors)||0===t.colors.length||"number"!=typeof t.targetScore||"number"!=typeof t.moves)throw new Error("LevelConfig: required fields missing or invalid (rows, cols, colors, targetScore, moves)");return{id:t.id,name:t.name,description:t.description,rows:t.rows,cols:t.cols,colors:t.colors,targetScore:t.targetScore,moves:t.moves,initialField:n(t.initialField)}},cc._RF.pop()},{}],LevelsConfigList:[function(e,t,o){"use strict";cc._RF.push(t,"91022OPy0hOFrOMaAl5R1eD","LevelsConfigList");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function l(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(l){i=[6,l],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ConfigList"),u=e("./ConfigUtils"),c=e("./LevelUtils"),p=cc._decorator.ccclass,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.loadConfigs=function(){return s(this,void 0,Promise,function(){var e,t;return l(this,function(o){switch(o.label){case 0:return[4,u.LoadConfigsFromDir(this.path)];case 1:return e=o.sent(),t=e.map(function(e){return c.convertLevelConfig(e)}).sort(function(e,t){var o,n;return(null!==(o=e.id)&&void 0!==o?o:0)-(null!==(n=t.id)&&void 0!==n?n:0)}),this._configs=t,[2]}})})},t.prototype.getLevelConfigByIndex=function(e){if(!this._configs.length||e<0)return null;var t=e%this._configs.length;return this._configs[t]||null},i([p],t)}(a.default);o.default=f,cc._RF.pop()},{"./ConfigList":"ConfigList","./ConfigUtils":"ConfigUtils","./LevelUtils":"LevelUtils"}],MainGameConfigType:[function(e,t,o){"use strict";cc._RF.push(t,"6bb38B+5pJNHbmZ/Wq5P9me","MainGameConfigType"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],MainLevelConfig:[function(e,t,o){"use strict";cc._RF.push(t,"7ce3eZg4olLmIY7B8vZf2vg","MainLevelConfig");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function l(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(l){i=[6,l],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ConfigList"),u=e("./ConfigUtils"),c=e("./LevelUtils"),p=cc._decorator,f=p.ccclass,h=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.path="Configs/Levels",t}return r(t,e),t.prototype.loadConfigs=function(){return s(this,void 0,Promise,function(){var e,t;return l(this,function(o){switch(o.label){case 0:return this._configs.length>0?[2]:[4,u.LoadConfigsFromDir(this.path)];case 1:return e=o.sent(),t=e.map(function(e){return c.convertLevelConfig(e)}).sort(function(e,t){var o,n;return(null!==(o=e.id)&&void 0!==o?o:0)-(null!==(n=t.id)&&void 0!==n?n:0)}),this._configs=t,[2]}})})},t.prototype.getLevelConfig=function(e){for(var t=0;t<this._configs.length;t++){var o=this._configs[t];if(o&&o.id===e)return o}throw new Error("No level config for id "+e)},t.prototype.getLevelConfigByIndex=function(e){if(!this._configs.length||e<0)return null;var t=e>=this._configs.length?e%this._configs.length:e;return this._configs[t]||null},i([f],t)}(a.default));o.default=h,cc._RF.pop()},{"./ConfigList":"ConfigList","./ConfigUtils":"ConfigUtils","./LevelUtils":"LevelUtils"}],PlayerProfile:[function(e,t,o){"use strict";cc._RF.push(t,"55e950Vgi5CHLEF1Ry8/9Uy","PlayerProfile"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.currentLevelIndex=0,this.boosterCounts=new Map,this.boostersInitialized=!1}return e.prototype.getCurrentLevelIndex=function(){return this.currentLevelIndex},e.prototype.setCurrentLevelIndex=function(e){this.currentLevelIndex=e>=0?e:0},e.prototype.ensureBoostersInitialized=function(e){if(!this.boostersInitialized&&e){for(var t=e.getConfigs(),o=0;o<t.length;o++){var n=t[o];if(n&&"string"==typeof n.id){var r=n.id;if(!this.boosterCounts.has(r)){var i="number"==typeof n.initialCount&&n.initialCount>=0?n.initialCount:0;this.boosterCounts.set(r,i)}}}this.boostersInitialized=!0}},e.prototype.getBoosterCount=function(e){if(!e)return 0;var t=this.boosterCounts.get(e);return"number"==typeof t?t:0},e.prototype.setBoosterCount=function(e,t){if(e){var o=t>=0?t:0;this.boosterCounts.set(e,o)}},e.prototype.changeBoosterCount=function(e,t){if(!e||!t)return this.getBoosterCount(e);var o=this.getBoosterCount(e)+t,n=o>=0?o:0;return this.boosterCounts.set(e,n),n},e}();o.default=n,cc._RF.pop()},{}],RocketHSupertileExtension:[function(e,t,o){"use strict";cc._RF.push(t,"19a0dEjlW1Il7FvJOiVhWCe","RocketHSupertileExtension"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./SupertileChainUtils"),r=e("../Constants/GameConstants"),i=function(){function e(){this.id=r.SupertileIds.ROCKET_H}return e.prototype.handle=function(e,t,o,r){if(t<0||t>=e.getRows())return null;for(var i=n.getChainDataFromSuperTileData(r),s=n.createRemovedCellTracker(),l=[],a=e.getScore(),u=0,c=0;c<e.getCols();c++)if(null!==e.getCellValue(t,c))if(t!=t||c!==o)if(e.isSuperTile(t,c)){var p=e.getSuperTileId(t,c);if(!p||!i)continue;n.addSuperTileToQueue(i,p,t,c)}else e.setCellValue(t,c,null),s.pushRemoved(t,c),l.push({row:t,col:c}),u++;else e.setCellValue(t,c,null),s.pushRemoved(t,c),l.push({row:t,col:c}),u++;return 0===s.removed.length?null:(n.addDirectStepToChain(i,l),n.processSuperTileQueue(e,i,s),n.calculateAndApplyScore(e,u),n.createBlastGameStepResult(e,s.removed,a))},e}();o.default=i,cc._RF.pop()},{"../Constants/GameConstants":"GameConstants","./SupertileChainUtils":"SupertileChainUtils"}],RocketVSupertileExtension:[function(e,t,o){"use strict";cc._RF.push(t,"845cffwDuNNyLWMJQhovUfh","RocketVSupertileExtension"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./SupertileChainUtils"),r=e("../Constants/GameConstants"),i=function(){function e(){this.id=r.SupertileIds.ROCKET_V}return e.prototype.handle=function(e,t,o,r){if(o<0||o>=e.getCols())return null;for(var i=n.getChainDataFromSuperTileData(r),s=n.createRemovedCellTracker(),l=[],a=e.getScore(),u=0,c=0;c<e.getRows();c++)if(null!==e.getCellValue(c,o))if(c!==t||o!=o)if(e.isSuperTile(c,o)){var p=e.getSuperTileId(c,o);if(!p||!i)continue;n.addSuperTileToQueue(i,p,c,o)}else e.setCellValue(c,o,null),s.pushRemoved(c,o),l.push({row:c,col:o}),u++;else e.setCellValue(c,o,null),s.pushRemoved(c,o),l.push({row:c,col:o}),u++;return 0===s.removed.length?null:(n.addDirectStepToChain(i,l),n.processSuperTileQueue(e,i,s),n.calculateAndApplyScore(e,u),n.createBlastGameStepResult(e,s.removed,a))},e}();o.default=i,cc._RF.pop()},{"../Constants/GameConstants":"GameConstants","./SupertileChainUtils":"SupertileChainUtils"}],ShuffleNoMovesResolver:[function(e,t,o){"use strict";cc._RF.push(t,"b2c3dTl9qdIkLEjRWeJASNF","ShuffleNoMovesResolver"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){void 0===e&&(e=3),this.usedCount=0,this.maxShuffles=e>=0?e:0}return e.prototype.tryResolve=function(e,t){return!(this.usedCount>=this.maxShuffles||(this.usedCount++,e(t||function(){}),0))},e}();o.default=n,cc._RF.pop()},{}],SuperTileData:[function(e,t,o){"use strict";cc._RF.push(t,"0251ao5TaFOjbCIeQ0fJgVc","SuperTileData"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],SupertileChainUtils:[function(e,t,o){"use strict";cc._RF.push(t,"877f3VsLolP0a6H49sp158k","SupertileChainUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.createBlastGameStepResult=o.calculateAndApplyScore=o.processSuperTileQueue=o.addDirectStepToChain=o.addSuperTileToQueue=o.getDepth=o.ensureSuperTileQueue=o.getChainDataFromSuperTileData=o.createRemovedCellTracker=void 0;var n=e("../Types/TypeGuards");function r(e){Array.isArray(e.superTileQueue)||(e.superTileQueue=[])}function i(e){return e&&"number"==typeof e.depth&&e.depth>=0?e.depth:0}o.createRemovedCellTracker=function(){var e=[],t={};return{removed:e,used:t,pushRemoved:function(o,n){var r=o+"_"+n;t[r]||(t[r]=!0,e.push({row:o,col:n}))}}},o.getChainDataFromSuperTileData=function(e){return e&&n.isSuperTileChainData(e)?e:null},o.ensureSuperTileQueue=r,o.getDepth=i,o.addSuperTileToQueue=function(e,t,o,n){r(e);var s=i(e);e.superTileQueue.push({id:t,row:o,col:n,depth:s+1})},o.addDirectStepToChain=function(e,t){if(e&&0!==t.length){var o=i(e);e.superTileChainSteps.push({depth:o,cells:t})}},o.processSuperTileQueue=function(e,t,o){if(t&&Array.isArray(t.superTileQueue)&&0!==t.superTileQueue.length){var n=e.processSuperTileQueuePublic(t);if(n&&n.removed&&0!==n.removed.length)for(var r=0;r<n.removed.length;r++){var i=n.removed[r];o.pushRemoved(i.row,i.col)}}},o.calculateAndApplyScore=function(e,t){if(!(t<=0)){var o=e.calculateGroupScorePublic(t);e.applyScorePublic(o)}},o.createBlastGameStepResult=function(e,t,o){var n=e.getScore()-o;return{removed:t,score:e.getScore(),targetScore:e.getTargetScore(),remainingMoves:e.getRemainingMoves(),scoreDelta:n}},cc._RF.pop()},{"../Types/TypeGuards":"TypeGuards"}],SupertileConfig:[function(e,t,o){"use strict";cc._RF.push(t,"3f9afsxzvtILrdCj1CvZKUS","SupertileConfig"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],SupertileExtensionFactory:[function(e,t,o){"use strict";cc._RF.push(t,"e0f73me9PxNYaneKVJRGhxe","SupertileExtensionFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this.extensions=[],e&&e.length>0&&(this.extensions=e.slice())}return e.prototype.register=function(e){e&&(this.extensions.indexOf(e)>=0||this.extensions.push(e))},e.prototype.get=function(e){if(!e)return null;var t=e.trim();if(!t)return null;for(var o=0;o<this.extensions.length;o++){var n=this.extensions[o];if(n&&n.id&&n.id===t)return n}return null},e}();o.default=n,cc._RF.pop()},{}],SupertilesConfigList:[function(e,t,o){"use strict";cc._RF.push(t,"343b4FwxAFDS412fh3rFLRW","SupertilesConfigList");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./ConfigList"),l=cc._decorator.ccclass,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getSuperTileConfig=function(e){for(var t=0;t<this._configs.length;t++){var o=this._configs[t];if(o&&o.id===e)return o}throw new Error("No supertile config for id "+e)},t.prototype.getSuperTileTypeForSize=function(e){if(e<2)return null;for(var t=-1,o=null,n=0;n<this._configs.length;n++){var r=this._configs[n];if(r&&"string"==typeof r.id){var i="number"==typeof r.generationThreshold?r.generationThreshold:-1;i>=0&&i<=e&&i>t&&(t=i,o=r.id)}}return o},i([l],t)}(s.default);o.default=a,cc._RF.pop()},{"./ConfigList":"ConfigList"}],TapInput:[function(e,t,o){"use strict";cc._RF.push(t,"f5044Qxv31BBpbZUUo5Cxrj","TapInput"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./TileInputEventType"),r=e("../DI/DiContainer"),i=e("../DI/DiTokens"),s=function(){function e(e){this.bombBooster=null,this.teleportBooster=null,this.gameCore=e}return e.prototype.init=function(){},e.prototype.getSupportedEvents=function(){return[n.default.Tap]},e.prototype.resolveBombBooster=function(){if(!this.bombBooster){var e=r.default.instance;e.has(i.default.BombBooster)&&(this.bombBooster=e.resolve(i.default.BombBooster))}},e.prototype.resolveTeleportBooster=function(){if(!this.teleportBooster){var e=r.default.instance;e.has(i.default.TeleportBooster)&&(this.teleportBooster=e.resolve(i.default.TeleportBooster))}},e.prototype.handleTileTap=function(e){if(-1!==this.gameCore.getSupportedEvents().indexOf(n.default.Tap)&&(this.resolveBombBooster(),this.resolveTeleportBooster(),!(this.teleportBooster&&this.teleportBooster.handleTileTap(e)||this.bombBooster&&this.bombBooster.handleTileTap(e)))){var t={type:n.default.Tap,tile:e};this.gameCore.handleEvent(t)}},e}();o.default=s,cc._RF.pop()},{"../DI/DiContainer":"DiContainer","../DI/DiTokens":"DiTokens","./TileInputEventType":"TileInputEventType"}],TeleportBoosterController:[function(e,t,o){"use strict";cc._RF.push(t,"68616LCkkpGl50+pPVCDcgV","TeleportBoosterController");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function l(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,l)}a((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return a([e,t])}}function a(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(l){i=[6,l],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../UI/BoosterButtonView"),s=e("../Constants/GameConstants"),l=function(){function e(){this.overlay=null,this.hintLabel=null,this.boostersPanel=null,this.gameCore=null,this.teleportButton=null,this.buttonView=null,this.active=!1,this.teleportInProgress=!1,this.firstTile=null}return e.prototype.init=function(e,t,o,n,r,s){this.overlay=e,this.hintLabel=t,this.boostersPanel=o,this.gameCore=n,this.teleportButton=s,this.overlay&&(this.overlay.active=!1,this.overlay.on(cc.Node.EventType.TOUCH_END,this.onOverlayTouch,this)),this.hintLabel&&(this.hintLabel.active=!1),this.teleportButton&&(this.teleportButton.on(cc.Node.EventType.TOUCH_END,this.onTeleportButtonClick,this),this.buttonView=this.teleportButton.getComponent(i.default))},e.prototype.onTeleportButtonClick=function(){this.active||this.buttonView&&!this.buttonView.canUse()||this.enterTeleportMode()},e.prototype.enterTeleportMode=function(){if(this.active=!0,this.firstTile=null,this.teleportInProgress=!1,this.overlay.active=!0,this.hintLabel){var e=this.hintLabel.getComponent(cc.Label);e&&(e.string="\u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u0439 \u0442\u0430\u0439\u043b"),this.hintLabel.active=!0}this.boostersPanel&&(this.boostersPanel.active=!1)},e.prototype.exitTeleportMode=function(){this.active=!1,this.firstTile=null,this.teleportInProgress=!1,this.overlay&&(this.overlay.active=!1),this.hintLabel&&(this.hintLabel.active=!1),this.boostersPanel&&!this.gameCore.isGameEnded()&&(this.boostersPanel.active=!0)},e.prototype.onOverlayTouch=function(){this.active&&(this.teleportInProgress||this.exitTeleportMode())},e.prototype.handleTileTap=function(e){var t=this;if(!this.active)return!1;if(this.teleportInProgress)return!0;if(!e)return!0;if(!this.firstTile){if(this.firstTile=e,this.hintLabel){var o=this.hintLabel.getComponent(cc.Label);o&&(o.string="\u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0442\u043e\u0440\u043e\u0439 \u0442\u0430\u0439\u043b")}return!0}if(this.firstTile.row===e.row&&this.firstTile.col===e.col)return this.exitTeleportMode(),!0;if(!this.gameCore||!this.gameCore.useBooster)return this.exitTeleportMode(),!0;this.hintLabel&&(this.hintLabel.active=!1);var i=this.firstTile;return this.firstTile=null,this.teleportInProgress=!0,this.gameCore.useBooster(s.BoosterIds.TELEPORT,{fromRow:i.row,fromCol:i.col,toRow:e.row,toCol:e.col,preAnimation:function(o){return n(t,void 0,void 0,function(){var t,n,s,l;return r(this,function(r){switch(r.label){case 0:return o?(t=o.getTile(i.row,i.col),n=o.getTile(e.row,e.col),t&&n&&t.node&&n.node?(s=t.node.position.clone?t.node.position.clone():cc.v3(t.node.x,t.node.y,t.node.z),l=n.node.position.clone?n.node.position.clone():cc.v3(n.node.x,n.node.y,n.node.z),[4,Promise.all([new Promise(function(e){cc.tween(t.node).to(.25,{position:l}).call(function(){return e()}).start()}),new Promise(function(e){cc.tween(n.node).to(.25,{position:s}).call(function(){return e()}).start()})])]):[2]):[2];case 1:return r.sent(),[2]}})})}},function(){t.buttonView&&t.buttonView.consume(),t.teleportInProgress=!1,t.exitTeleportMode()}),!0},e}();o.default=l,cc._RF.pop()},{"../../UI/BoosterButtonView":"BoosterButtonView","../Constants/GameConstants":"GameConstants"}],TeleportBoosterExtension:[function(e,t,o){"use strict";cc._RF.push(t,"8acf0kcJjZI8pKOsMbQwJnd","TeleportBoosterExtension"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Types/TypeGuards"),r=e("../Constants/GameConstants"),i=function(){function e(){this.id=r.BoosterIds.TELEPORT}return e.prototype.handle=function(e,t){if(!n.isTeleportBoosterData(t))return null;var o=t.fromRow,r=t.fromCol,i=t.toRow,s=t.toCol;if(!e.isInsidePublic(o,r))return null;if(!e.isInsidePublic(i,s))return null;if(o===i&&r===s)return null;var l=e.getCellValue(o,r),a=e.getCellValue(i,s);return null===l&&null===a?null:(e.setCellValue(o,r,a),e.setCellValue(i,s,l),{removed:[],score:e.getScore(),targetScore:e.getTargetScore(),remainingMoves:e.getRemainingMoves(),scoreDelta:0})},e}();o.default=i,cc._RF.pop()},{"../Constants/GameConstants":"GameConstants","../Types/TypeGuards":"TypeGuards"}],TileColorConfig:[function(e,t,o){"use strict";cc._RF.push(t,"901e2nKSbhG95IHANSNalsG","TileColorConfig");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,a=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.keys=[],t.sprites=[],t.defaultSprite=null,t}return r(t,e),t.prototype.getSprite=function(e){var t=this.keys.indexOf(e);if(t>=0&&t<this.sprites.length){var o=this.sprites[t];if(o)return o}return this.defaultSprite},i([a([cc.String])],t.prototype,"keys",void 0),i([a([cc.SpriteFrame])],t.prototype,"sprites",void 0),i([a(cc.SpriteFrame)],t.prototype,"defaultSprite",void 0),i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],TileInputEventType:[function(e,t,o){"use strict";var n;cc._RF.push(t,"70a9cE1aLRLhISNXSWxfCrZ","TileInputEventType"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.Tap=0]="Tap",e[e.Swipe=1]="Swipe",e[e.Select=2]="Select",e[e.Deselect=3]="Deselect",e[e.PathExtend=4]="PathExtend",e[e.Booster=5]="Booster"}(n||(n={})),o.default=n,cc._RF.pop()},{}],TileInputEvent:[function(e,t,o){"use strict";cc._RF.push(t,"b67f5hcNqRMlLtmvjJyzElr","TileInputEvent"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],TileSpriteDictionary:[function(e,t,o){"use strict";cc._RF.push(t,"ca21a2lVbdES6peYQf+JBfU","TileSpriteDictionary"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this.sprites=new Map,this.defaultSprite=null,this.defaultSprite=e||null}return e.prototype.register=function(e,t){if(e&&t){var o=e.trim();o&&this.sprites.set(o,t)}},e.prototype.get=function(e){if(!e)return this.defaultSprite;var t=e.trim();return t&&this.sprites.get(t)||this.defaultSprite},e.prototype.setDefaultSprite=function(e){this.defaultSprite=e||null},e.prototype.getDefaultSprite=function(){return this.defaultSprite},e}();o.default=n,cc._RF.pop()},{}],Tile:[function(e,t,o){"use strict";cc._RF.push(t,"88bc2ebiyZFT6qUmV+/FM/D","Tile");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator.ccclass,l=e("./DI/DiContainer"),a=e("./DI/DiTokens"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.row=0,t.col=0,t.tileType=null,t.input=null,t}return r(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.handleClick,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.handleClick,this)},t.prototype.resolveInput=function(){if(!this.input){var e=l.default.instance;e.has(a.default.Input)&&(this.input=e.resolve(a.default.Input))}},t.prototype.handleClick=function(){this.resolveInput(),this.input&&this.input.handleTileTap(this)},i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./DI/DiContainer":"DiContainer","./DI/DiTokens":"DiTokens"}],TopPanelView:[function(e,t,o){"use strict";cc._RF.push(t,"3934d668hpAwbfUdgVcrau7","TopPanelView");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,o,s):r(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,l=s.ccclass,a=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.movesCounter=null,t.pointsCounter=null,t}return r(t,e),t.prototype.setActive=function(e){this.node.active=e},t.prototype.setMoves=function(e){this.movesCounter.string=""+e},t.prototype.setPoints=function(e,t){this.pointsCounter.string=e+"/"+t},i([a(cc.Label)],t.prototype,"movesCounter",void 0),i([a(cc.Label)],t.prototype,"pointsCounter",void 0),i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],TypeGuards:[function(e,t,o){"use strict";cc._RF.push(t,"d48a6KVDhxB/bF6ZhJTfv/K","TypeGuards"),Object.defineProperty(o,"__esModule",{value:!0}),o.isChainData=o.isSuperTileChainData=o.isTeleportBoosterData=o.isBombBoosterData=void 0,o.isBombBoosterData=function(e){return"object"==typeof e&&null!==e&&"row"in e&&"number"==typeof e.row&&"col"in e&&"number"==typeof e.col},o.isTeleportBoosterData=function(e){return"object"==typeof e&&null!==e&&"fromRow"in e&&"number"==typeof e.fromRow&&"fromCol"in e&&"number"==typeof e.fromCol&&"toRow"in e&&"number"==typeof e.toRow&&"toCol"in e&&"number"==typeof e.toCol},o.isSuperTileChainData=function(e){return"object"==typeof e&&null!==e&&"superTileChainSteps"in e&&Array.isArray(e.superTileChainSteps)},o.isChainData=function(e){return"object"==typeof e&&null!==e&&"superTileChainSteps"in e&&Array.isArray(e.superTileChainSteps)},cc._RF.pop()},{}],ValidationUtils:[function(e,t,o){"use strict";cc._RF.push(t,"a9466rk55lDHpCj+ncNW9rT","ValidationUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.canProcessGameEvent=o.isValidCellValue=o.isValidPosition=void 0,o.isValidPosition=function(e,t,o){return e.isInsidePublic(t,o)},o.isValidCellValue=function(e){return null!==e&&e.trim().length>0},o.canProcessGameEvent=function(e){if(e.getRemainingMoves()<=0)return!1;var t=e.getTargetScore();return!(t>0&&e.getScore()>=t)},cc._RF.pop()},{}]},{},["AdminPanel","BombBoosterConfig","BoosterConfig","BoostersConfigList","ConfigList","ConfigUtils","DynamiteSupertileConfig","FieldViewConfigComponent","LevelConfig","LevelUtils","LevelsConfigList","MainGameConfigType","MainLevelConfig","SupertileConfig","SupertilesConfigList","TileColorConfig","DiContainer","DiInitializer","DiTokens","BlastAnimationView","IAnimationView","IBlastGameCoreView","BombBoosterController","BombBoosterExtension","BoosterExtensionFactory","BoostersControllersFactory","IBoosterController","IBoosterExtension","TeleportBoosterController","TeleportBoosterExtension","GameConstants","FieldView","GameController","IFieldView","IGameController","INoMovesResolver","BlastGameModel","GameModelFactory","IGameModel","ShuffleNoMovesResolver","DynamiteMaxSupertileExtension","DynamiteSupertileExtension","ISupertileExtension","RocketHSupertileExtension","RocketVSupertileExtension","SupertileChainUtils","SupertileExtensionFactory","TileSpriteDictionary","BoosterData","SuperTileData","TypeGuards","ValidationUtils","IInput","TapInput","TileInputEvent","TileInputEventType","PlayerProfile","Tile","ActiveBoosterOverlay","BoosterButtonView","BoostersPanelView","EndGamePanel","GameUI","IGameUi","TopPanelView"]);